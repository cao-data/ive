(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{579:function(e,t,n){var content=n(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(249).default)("9ac73e9c",content,!0,{sourceMap:!1})},597:function(e,t,n){"use strict";n(579)},598:function(e,t,n){var r=n(248)(!1);r.push([e.i,".layout-mapper[data-v-c3ceeb84]{height:70vh}.mapboxgl-map[data-v-c3ceeb84]{height:100%}#map[data-v-c3ceeb84]{height:70vh}",""]),e.exports=r},613:function(e,t,n){"use strict";n.r(t);var r=n(298),l=(n(85),n(73),n(33),n(72),n(165),n(189),n(413),n(98),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(22),n(80),n(105),n(49),{props:{data:{type:Object,required:!0},graph:{type:Object,required:!0}},data:function(){return{map:null,currentMarkers:[],tableData:[],jurisdiccionSelected:null,localidadSelected:null,departamentoSelected:null}},computed:{selected:function(){return this.$store.state.map.selected},mapStates:function(){return this.$store.state.map.list},selectedData:function(){var e=this;return this.data.values.filter((function(t){return e.selected.includes(t.id_jurisdiccion)}))},mapboxApiKey:function(){return"pk.eyJ1IjoiZ3VpbGxlY3JvIiwiYSI6ImNsMzlsYnN6ODA2c3Yzamxyd2tsNDM0YnkifQ.OWQi9vVD_YkpJEbg4DNbnA"},extraHeaders:function(){if(!this.data)return[];var e=["nro_orden","codigo","id_jurisdiccion","jurisdiccion_grafico","lat_long"],t=this.data.keys.filter((function(t){return!e.includes(t)}));return t},filteredTableData:function(){var e=this;return null===this.jurisdiccionSelected?this.tableData:null===this.localidadSelected?this.tableData.filter((function(t){return t.jurisdiccion===e.jurisdiccionSelected})):null===this.departamentoSelected?this.tableData.filter((function(t){return t.jurisdiccion===e.jurisdiccionSelected&&t.localidad===e.localidadSelected})):this.tableData.filter((function(t){return t.jurisdiccion===e.jurisdiccionSelected&&t.localidad===e.localidadSelected&&t.departamento===e.departamentoSelected}))},jurisdiccionOptions:function(){if(0===this.tableData.length)return[];var e=this.tableData.map((function(e){return e.jurisdiccion}));return Object(r.a)(new Set(e))},localidadOptions:function(){var e=this;if(0===this.tableData.length)return[];if(null===this.jurisdiccionSelected)return[];var t=this.tableData.filter((function(t){return t.jurisdiccion===e.jurisdiccionSelected})).map((function(e){return e.localidad}));return Object(r.a)(new Set(t))},departamentoOptions:function(){var e=this;if(0===this.tableData.length)return[];if(null===this.localidadSelected)return[];var t=this.tableData.filter((function(t){return t.localidad===e.localidadSelected&&t.jurisdiccion===e.jurisdiccionSelected})).map((function(e){return e.departamento}));return Object(r.a)(new Set(t))},filterJurisdiccionPlaceholder:function(){return 0===this.jurisdiccionOptions.length?"No hay datos para elegir":"Filtrar por jurisdicción"},filterLocalidadPlaceholder:function(){return null===this.jurisdiccionSelected?"Primero elija una jurisdicción":0===this.localidadOptions.length?"No hay datos para elegir":"Filtrar por localidad"},filterDepartamentoPlaceholder:function(){return null===this.localidadSelected?"Primero elija una localidad":0===this.departamentoOptions.length?"No hay datos para elegir":"Filtrar por departamento"}},watch:{selected:function(e,t){e!==t&&this.reloadMap()}},mounted:function(){var e=this;mapboxgl.accessToken=this.mapboxApiKey,this.map=new mapboxgl.Map({container:"map",projection:"mercator",style:"mapbox://styles/mapbox/streets-v12",center:["-65.95621","-38.42309"],zoom:"3.69"}),this.map.on("load",(function(){e.prepareChart(e.map)}))},methods:{selectJurisdiccion:function(){this.localidadSelected=null,this.departamentoSelected=null},selectLocalidad:function(){this.departamentoSelected=null},selectDepartamento:function(){},flyTo:function(e){var t=e.split(", ");this.map.flyTo({center:[t[1],t[0]],zoom:15})},reloadMap:function(){this.jurisdiccionSelected=null,this.localidadSelected=null,this.departamentoSelected=null,this.currentMarkers.forEach((function(marker){marker.remove()})),this.currentMarkers=[],this.prepareChart(this.map)},prepareChart:function(map){var e,t=this;e=1===this.selected.length&&"nacional"!==this.selected[0]||this.selected.length>1?JSON.parse(JSON.stringify(this.data.values.filter((function(e){return t.selected.includes(e.id_jurisdiccion)})))):JSON.parse(JSON.stringify(this.data.values)),this.tableData=e,e.forEach((function(e){if(""!==e.lat_long&&"-"!==e.lat_long){var n="<h3>".concat(e.institucion,"</h3>");n+='<div class="the-marker-content">',t.extraHeaders.forEach((function(header){"Latitud y Longitud"!==header&&(n+='<p class="data-title">'.concat(t.data.labels[header],'</p><p class="data-text">').concat(e[header]||"<i>- No Data -</i>","</p>"))})),n+="</div>";var r=(new mapboxgl.Popup).setHTML(n),l=e.lat_long.split(", "),o=document.createElement("div");o.className="custom-marker",o.style.background="#000",o.style["border-radius"]="40px",o.style.border="2px solid #FFFFFF",o.style.width="16px",o.style.height="16px";var marker=new mapboxgl.Marker(o).setLngLat([l[1],l[0]]).setPopup(r).addTo(t.map);t.currentMarkers.push(marker)}}))}}}),o=(n(597),n(132)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("h1",{staticClass:"title is-4 mt-6 mb-5"},[e._v("\n    Jurisdicción seleccionada: "),n("span",{staticClass:"is-700 has-text-primary"},[e._v(e._s(e.mapStates[e.selected[0]]))])]),e._v(" "),n("div",{staticClass:"box mb-6"},[n("b-field",{attrs:{grouped:""}},[n("b-field",{attrs:{label:"Filtrar por Jurisdicción",expanded:""}},[n("b-select",{attrs:{placeholder:e.filterJurisdiccionPlaceholder,expanded:"",disabled:0===e.jurisdiccionOptions.length},on:{input:e.selectJurisdiccion},model:{value:e.jurisdiccionSelected,callback:function(t){e.jurisdiccionSelected=t},expression:"jurisdiccionSelected"}},e._l(e.jurisdiccionOptions,(function(option){return n("option",{key:option,domProps:{value:option}},[e._v("\n            "+e._s(option)+"\n          ")])})),0)],1),e._v(" "),n("b-field",{attrs:{label:"Filtrar por Localidad",expanded:""}},[n("b-select",{attrs:{placeholder:e.filterLocalidadPlaceholder,expanded:"",disabled:null===e.jurisdiccionSelected||0===e.localidadOptions.length},on:{input:e.selectLocalidad},model:{value:e.localidadSelected,callback:function(t){e.localidadSelected=t},expression:"localidadSelected"}},e._l(e.localidadOptions,(function(option){return n("option",{key:option,domProps:{value:option}},[e._v("\n            "+e._s(option)+"\n          ")])})),0)],1),e._v(" "),n("b-field",{attrs:{label:"Filtrar por Departamento",expanded:""}},[n("b-select",{attrs:{placeholder:e.filterDepartamentoPlaceholder,expanded:"",disabled:null==e.localidadSelected||0===e.departamentoOptions.length},on:{input:e.selectDepartamento},model:{value:e.departamentoSelected,callback:function(t){e.departamentoSelected=t},expression:"departamentoSelected"}},e._l(e.departamentoOptions,(function(option){return n("option",{key:option,domProps:{value:option}},[e._v("\n            "+e._s(option)+"\n          ")])})),0)],1)],1),e._v(" "),n("hr"),e._v(" "),n("b-table",{attrs:{data:e.filteredTableData,paginated:"","per-page":10,"current-page":1},scopedSlots:e._u([{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[n("p",[e._v("\n            No hay datos para mostrar\n          ")])])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"jurisdiccion"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          Ubicación\n        ")]},proxy:!0},{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.jurisdiccion)+", "+e._s(t.row.localidad)+", "+e._s(t.row.departamento)+"\n        ")]}}])}),e._v(" "),n("b-table-column",{attrs:{field:"Ubicación"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          Institución\n        ")]},proxy:!0},{key:"default",fn:function(t){return[n("a",{on:{click:function(n){return e.flyTo(t.row.lat_long)}}},[n("b",[e._v(e._s(t.row.institucion))])]),n("br"),e._v("\n          "+e._s(t.row.direccion||"- Sin Dato -")+"\n        ")]}}])}),e._v(" "),n("b-table-column",{attrs:{field:"Teléfono"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          Teléfono\n        ")]},proxy:!0},{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.telefono||"- Sin Datos -")+"\n        ")]}}])}),e._v(" "),n("b-table-column",{attrs:{field:"Horario"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          Horario\n        ")]},proxy:!0},{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.horario||"- Sin Datos -")+"\n        ")]}}])}),e._v(" "),n("b-table-column",{attrs:{field:"Horario"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("\n          Contacto\n        ")]},proxy:!0},{key:"default",fn:function(t){return[n("u",[e._v("Email")]),e._v(": "+e._s(t.row.email||"- Sin Datos -")),n("br"),e._v(" "),n("u",[e._v("Whatsapp")]),e._v(": "+e._s(t.row.whatsapp||"- Sin Datos -")+"\n        ")]}}])})],1)],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"layout-mapper"},[t("div",{attrs:{id:"map"}})])}],!1,null,"c3ceeb84",null);t.default=component.exports}}]);